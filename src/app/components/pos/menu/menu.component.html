<mat-sidenav-container class="sidenav-container">
  <mat-sidenav
    #drawerLeft
    class="sidenav"
    fixedInViewport
    [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'"
    [mode]="(isHandset$ | async) ? 'over' : 'side'"
    [opened]="(isHandset$ | async) === false"
    position="start"
  >
    <mat-toolbar>
      <img src="../../../../assets/images/forward-logo-new.png" width="199" />
    </mat-toolbar>
    <mat-nav-list>
      <a
        mat-list-item
        *ngFor="let item of menuItemsLeft"
        href="#"
        class="menu-item"
        [class.selected]="item.selected"
        (click)="menuItemSelected(item, menuItemsLeft)"
      >
        {{ item.text }}
      </a>
    </mat-nav-list>
    <mat-chip-listbox
      class="mat-mdc-chip-set-stacked menu-item"
      aria-label="Color selection"
      style="position: absolute; bottom: 0"
    >
      @for (chip of sharedService.waiters(); track chip) {
      <mat-chip-option
        [selected]="chip.selected"
        color="primary"
        style="
          display: flex;
          flex-direction: row;
          justify-content: flex-start;
          align-items: center;
        "
        (click)="chipClicked(chip)"
      >
        <div matChipAvatar class="example-header-image"></div>
        {{ chip.name }}
      </mat-chip-option>
      }
    </mat-chip-listbox>
  </mat-sidenav>
  <mat-sidenav
    #drawerRight
    class="sidenav-right"
    fixedInViewport
    [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'"
    [mode]="(isHandset$ | async) ? 'over' : 'side'"
    [opened]="(isHandset$ | async) === false"
    position="end"
  >
    <div
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 60px;
        padding: 5px 16px;
      "
    >
      <div>
        @if (sharedService.selectedWaiter()) {
        <h4 style="margin-bottom: -5px">
          <strong>
            Table
            {{ sharedService.selectedWaiter()?.selectedTable }}
          </strong>
        </h4>
        <sub>{{ sharedService.selectedWaiter()?.name }}</sub>
        } @else {
        <h4>Please select a waiter</h4>
        }
      </div>
      <button mat-icon-button [matMenuTriggerFor]="tableMenu">
        <mat-icon>edit</mat-icon>
      </button>
      <mat-menu #tableMenu="matMenu">
        <button
          mat-menu-item
          *ngFor="let tableNum of sharedService.selectedWaiter()?.tables"
          (click)="tableChanged(tableNum)"
        >
          <span>Table {{ tableNum }}</span>
        </button>
      </mat-menu>
    </div>
    <mat-nav-list style="height: calc(100% - 420px); overflow: auto">
      <div *ngFor="let item of sharedService.selectedItems(); let i = index">
        <span
          style="
            overflow: hidden;
            white-space: nowrap;
            display: inline-flex;
            width: 100%;
          "
        >
          <a
            mat-list-item
            href="#"
            [class.selected]="item.selected"
            class="list-item"
            (click)="item.selected = !item.selected"
          >
            <span
              style="
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
              "
            >
              <span>
                <mat-chip style="background-color: white">{{ i + 1 }}</mat-chip>
                <span style="font-size: small">
                  {{ item.title }}
                </span>
                <span style="font-size: x-small">
                  x
                  {{ item.quantity }}
                </span>
              </span>
              <span style="font-size: small"> R{{ item.total }} </span>
            </span>
          </a>
          <button
            mat-icon-button
            style="transition: all 0.2s"
            [style.width]="item.selected ? '48px' : '0'"
            [style.padding]="item.selected ? '6px' : '0'"
            [style.margin-right]="item.selected ? '6px' : '0'"
            (click)="delete(item)"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </span>
      </div>
    </mat-nav-list>
    <div
      style="
        position: absolute;
        bottom: 10px;
        background-color: rgb(245, 245, 245);
        border-radius: 4px;
        width: calc(100% - 40px);
        height: 300px;
        margin: 0 10px;
        padding: 10px;
      "
    >
      <div class="totals-item">
        <sub>Subtotal</sub>
        <sub>R {{ sharedService.totalSum() }}</sub>
      </div>
      <div
        class="totals-item"
        style="border-bottom: 1px dashed gray; padding-bottom: 10px"
      >
        <sub>Tax 10%</sub>
        <sub
          >R
          {{
            sharedService.totalSum() > 0 ? sharedService.totalSum() / 10 : 0
          }}</sub
        >
      </div>
      <div class="totals-item">
        <h4>Total</h4>
        <h4>
          <strong
            >R
            {{
              sharedService.totalSum() > 0
                ? sharedService.totalSum() +
                  (sharedService.totalSum() > 0
                    ? sharedService.totalSum() / 10
                    : 0)
                : 0
            }}</strong
          >
        </h4>
      </div>
      <div style="position: absolute; bottom: 10px; width: calc(100% - 20px)">
        <div style="margin-bottom: 20px">
          <sub>Payment method</sub><br />
          <div
            style="display: flex; justify-content: center; align-items: center"
          >
            <mat-button-toggle-group
              name="favoriteColor"
              aria-label="Favorite Color"
              style="border: none; padding: 7px"
            >
              <mat-button-toggle
                value="cash"
                style="
                  margin-right: 5px;
                  border: none;
                  border-radius: 4px;
                  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.2);
                  -webkit-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.2);
                  -moz-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.2);
                "
              >
                <mat-icon> attach_money</mat-icon>
                Cash
              </mat-button-toggle>
              <mat-button-toggle
                value="card"
                style="
                  margin-left: 5px;
                  border: none;
                  border-radius: 4px;
                  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.2);
                  -webkit-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.2);
                  -moz-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.2);
                "
              >
                <mat-icon>credit_card</mat-icon>
                Card
              </mat-button-toggle>
            </mat-button-toggle-group>
          </div>
        </div>
        <button mat-raised-button color="warn" style="width: 100%">
          Place Order
        </button>
      </div>
    </div>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar>
      @if (isHandset$ | async) {
      <button
        type="button"
        aria-label="Toggle sidenav"
        mat-icon-button
        (click)="drawerLeft.toggle()"
      >
        <mat-icon aria-label="Side nav toggle icon">chevron_right</mat-icon>
      </button>
      }

      <mat-form-field appearance="outline" style="margin: 0 0 -24px 10px">
        <input matInput [(ngModel)]="value" placeholder="Placeholder" />
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>

      <span class="spacer"></span>
      @if (isHandset$ | async) {
      <button
        type="button"
        aria-label="Toggle sidenav"
        mat-icon-button
        (click)="drawerRight.toggle()"
      >
        <mat-icon aria-label="Side nav toggle icon">chevron_left</mat-icon>
      </button>
      }
    </mat-toolbar>
    <div style="padding: 24px">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
